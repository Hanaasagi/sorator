

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pagination &mdash; sorator 0.9 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="sorator 0.9 documentation" href="index.html"/>
        <link rel="next" title="Schema Builder" href="schema_builder.html"/>
        <link rel="prev" title="Validations" href="validations.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> sorator
          

          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_builder.html">Query Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="orm.html">ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="validations.html">Validations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pagination</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#paginate-database-records">Paginate database records</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#paginating-query-builder-results">Paginating Query Builder results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paginating-models">Paginating models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simple-pagination">Simple pagination</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-paginator-manually">Creating a Paginator manually</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#displaying-results">Displaying Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#additional-attributes-and-helper-methods">Additional attributes and helper methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#converting-results-to-json">Converting Results To JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-a-custom-current-page-resolver">Setting a custom current page resolver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="schema_builder.html">Schema Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="seeding.html">Seeding</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extensions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sorator</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Pagination</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pagination.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pagination">
<span id="id1"></span><h1>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h1>
<div class="section" id="paginate-database-records">
<h2>Paginate database records<a class="headerlink" href="#paginate-database-records" title="Permalink to this headline">¶</a></h2>
<p>There are several ways to paginate items. The simplest is by using the <code class="docutils literal"><span class="pre">paginate</span></code> method
on the <a class="reference internal" href="query_builder.html#querybuilder"><span class="std std-ref">Query Builder</span></a> or an <a class="reference internal" href="orm.html#orm"><span class="std std-ref">ORM</span></a> query.
The <code class="docutils literal"><span class="pre">paginate</span></code> method provided by Orator automatically takes care of setting
the proper limit and offset based on the current page.
By default, the current page needs to be specified.
However, as we’ll see it later, you can create a custom current page resolver.</p>
<div class="section" id="paginating-query-builder-results">
<h3>Paginating Query Builder results<a class="headerlink" href="#paginating-query-builder-results" title="Permalink to this headline">¶</a></h3>
<p>First, let’s take a look at calling the <code class="docutils literal"><span class="pre">paginate</span></code> method on a query generated by the query builder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">users</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">paginate</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, the first argument passed to paginate is the number of items we would like displayed “per page”
and the second is the current page we want to display. So, in this case, we want to retrieve <code class="docutils literal"><span class="pre">15</span></code> items on page <code class="docutils literal"><span class="pre">2</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently, pagination operations that use a <code class="docutils literal"><span class="pre">group_by</span></code> statement cannot be executed efficiently by Orator.
If you need to use a <code class="docutils literal"><span class="pre">group_by</span></code> with a paginated result set, it is recommended that you query the database
and create a paginator manually.</p>
</div>
</div>
<div class="section" id="paginating-models">
<h3>Paginating models<a class="headerlink" href="#paginating-models" title="Permalink to this headline">¶</a></h3>
<p>You can also paginate <a class="reference internal" href="orm.html#orm"><span class="std std-ref">ORM</span></a> queries. In this example, we will paginate the <code class="docutils literal"><span class="pre">User</span></code> model with <code class="docutils literal"><span class="pre">15</span></code> items per page
for the second page. As you can see, the syntax is nearly identical to paginating query builder results:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">all_users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">paginate</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, you can call paginate after setting other constraints on the query:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">some_users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;votes&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">paginate</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="simple-pagination">
<h4>Simple pagination<a class="headerlink" href="#simple-pagination" title="Permalink to this headline">¶</a></h4>
<p>If you only need “Next” and “Previous” pages in your pagination,
you have the option of using the <code class="docutils literal"><span class="pre">simple_paginate</span></code> method to perform a more efficient query.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">some_users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;votes&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">simple_paginate</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-a-paginator-manually">
<h3>Creating a Paginator manually<a class="headerlink" href="#creating-a-paginator-manually" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may wish to create a pagination instance manually, passing it a list of items.
You can do so by creating either a <code class="docutils literal"><span class="pre">Paginator</span></code> or a <code class="docutils literal"><span class="pre">LengthAwarePaginator</span></code> instance, depending on your needs.</p>
<p>The <code class="docutils literal"><span class="pre">Paginator</span></code> class does not need to know the total number of items in the result set;
however, because of this, the class does not have methods to retrieve the index of the last page.
The <code class="docutils literal"><span class="pre">LengthAwarePaginator</span></code> accepts almost the same arguments as the <code class="docutils literal"><span class="pre">Paginator</span></code>,
except that it does require a count of the total number of items in the result set.</p>
<p>In other words, the <code class="docutils literal"><span class="pre">Paginator</span></code> corresponds to the <code class="docutils literal"><span class="pre">simple_paginate</span></code> method on the query builder
and the ORM, while the <code class="docutils literal"><span class="pre">LengthAwarePaginator</span></code> corresponds to the <code class="docutils literal"><span class="pre">paginate</span></code> method.</p>
</div>
</div>
<div class="section" id="displaying-results">
<h2>Displaying Results<a class="headerlink" href="#displaying-results" title="Permalink to this headline">¶</a></h2>
<p>When you call the <code class="docutils literal"><span class="pre">paginate</span></code> or <code class="docutils literal"><span class="pre">simple_paginate</span></code> methods on a query builder or ORM query,
you will receive a paginator instance. When calling the <code class="docutils literal"><span class="pre">paginate</span></code> method,
you will receive an instance of <code class="docutils literal"><span class="pre">LengthAwarePaginator</span></code>. When calling the <code class="docutils literal"><span class="pre">simple_paginate</span></code> method,
you will receive an instance of <code class="docutils literal"><span class="pre">Paginator</span></code>. These objects provide several methods and attributes
that describe the result set. In addition to these helpers methods, the paginator instances are iterators
and may be looped as a list.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">some_users</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="additional-attributes-and-helper-methods">
<h3>Additional attributes and helper methods<a class="headerlink" href="#additional-attributes-and-helper-methods" title="Permalink to this headline">¶</a></h3>
<p>You may also access additional pagination information via the following methods and attributes
on paginator instances:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method or attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">count</span></span><span class="punctuation"><span class="pre">()</span></span></code></td>
<td>Returns the number of results on the current page</td>
</tr>
<tr class="row-odd"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">current_page</span></span></code></td>
<td>The current page of the paginator</td>
</tr>
<tr class="row-even"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">has_more_pages</span></span><span class="punctuation"><span class="pre">()</span></span></code></td>
<td>Returns <code class="docutils literal"><span class="pre">True</span></code> if there is more pages else <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
<tr class="row-odd"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">last_page</span></span></code></td>
<td>The number of the last page (Not available when using <code class="docutils literal"><span class="pre">simple_paginate</span></code>)</td>
</tr>
<tr class="row-even"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">next_page</span></span></code></td>
<td>The number of the next page if it exists else <code class="docutils literal"><span class="pre">None</span></code></td>
</tr>
<tr class="row-odd"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">per_page</span></span></code></td>
<td>The number of results per page</td>
</tr>
<tr class="row-even"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">previous_page</span></span></code></td>
<td>The number of the previous page if it exists else <code class="docutils literal"><span class="pre">None</span></code></td>
</tr>
<tr class="row-odd"><td><code class="code python docutils literal"><span class="name"><span class="pre">results</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">total</span></span></code></td>
<td>The total number of results (Not available when using <code class="docutils literal"><span class="pre">simple_paginate</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="converting-results-to-json">
<h2>Converting Results To JSON<a class="headerlink" href="#converting-results-to-json" title="Permalink to this headline">¶</a></h2>
<p>The Orator paginator result classes expose the <code class="docutils literal"><span class="pre">to_json</span></code> method,
so it’s very easy to convert your pagination results to JSON.</p>
<p>Be default, it will return the JSON formatted underlying <code class="docutils literal"><span class="pre">Collection</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">some_users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;votes&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">paginate</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">some_users</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-a-custom-current-page-resolver">
<h2>Setting a custom current page resolver<a class="headerlink" href="#setting-a-custom-current-page-resolver" title="Permalink to this headline">¶</a></h2>
<p>Sometimes, you may want to compute the current page based on external parameters.
For that purpose, you can set a custom current page resolver on the <code class="docutils literal"><span class="pre">Paginator</span></code> class.
In this example, the current page will be determined by a <code class="docutils literal"><span class="pre">?page</span></code> query string parameter:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">orator</span> <span class="kn">import</span> <span class="n">Paginator</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>


<span class="k">def</span> <span class="nf">current_page_resolver</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">Paginator</span><span class="o">.</span><span class="n">current_page_resolver</span><span class="p">(</span><span class="n">current_page_resolver</span><span class="p">)</span>
</pre></div>
</div>
<p>So from now on, It is no longer necessary to specify the current page:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">some_users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;votes&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">paginate</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="schema_builder.html" class="btn btn-neutral float-right" title="Schema Builder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="validations.html" class="btn btn-neutral" title="Validations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, shanbay.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>